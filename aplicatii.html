<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRUF Community - Aplicații</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>

    <header class="header" id="header">
        <nav class="nav container">
            <a href="/" class="nav__logo">
                <img src="https://i.postimg.cc/xT4RZBpg/Pruf-logo.gif" alt="PRUF Logo">
            </a>
            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item"><a href="index.html" class="nav__link">Acasă</a></li>
                    <li class="nav__item"><a href="aplicatii.html" class="nav__link active">Aplicații</a></li>
                    <li class="nav__item"><a href="regulamente.html" class="nav__link">Regulamente</a></li>
                    <li class="nav__item"><a href="https://pruf.tebex.io/" target="_blank" rel="noopener noreferrer" class="nav__link">Magazin</a></li>
                    <li class="nav__item"><a href="https://patreon.com/PRUFRP" target="_blank" rel="noopener noreferrer" class="nav__link">Patreon</a></li>
                    <li class="nav__item">
                        <a href="https://cfx.re/join/b36pq4" target="_blank" rel="noopener noreferrer" class="btn btn--fivem" title="Intră direct pe serverul FiveM PRUF">
                            <i class="fas fa-play"></i> FiveM Connect
                        </a>
                    </li>
                    <li class="nav__item"><a href="https://discord.gg/fMycRR7hWt" target="_blank" rel="noopener noreferrer" class="btn btn--discord">Alătură-te</a></li>
                </ul>
            </div>
            <button class="nav__toggle" id="nav-toggle" aria-label="Toggle navigation menu">
                <i class="fas fa-bars"></i>
            </button>
        </nav>
        <div class="nav__overlay" id="nav-overlay"></div>
    </header>

    <main>
        <section class="hero">
            <div class="container">
                <h1 class="hero__title animate-title">Aplicații PRUF</h1>
                <p class="hero__subtitle animate-text">Alege departamentul pentru care dorești să aplici în comunitatea noastră.</p>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="content-grid">
                    <!-- Staff Card -->
                    <div class="content-card">
                        <div class="content-card__icon"><i class="fas fa-user-shield"></i></div>
                        <h3 class="content-card__title">Staff</h3>
                        <p class="content-card__description">Aplică pentru a face parte din echipa administrativă a serverului.<br><b>Aplicațiile sunt închise</b></p>
                        <button class="btn" disabled>
                            <i class="fas fa-lock"></i> Aplicații Închise
                        </button>
                    </div>

                    <!-- Poliție Card -->
                    <div class="content-card">
                        <div class="content-card__icon"><i class="fas fa-shield-alt"></i></div>
                        <h3 class="content-card__title">Poliție</h3>
                        <p class="content-card__description">Aplică pentru a deveni membru al departamentului de poliție.</p>
                        <a href="https://forms.gle/DzuGYs9y8qvbj7sz5" class="btn" target="_blank" rel="noopener noreferrer">
                            <i class="fas fa-arrow-right"></i> Aplică Poliție
                        </a>
                    </div>

                    <!-- SMURD Card -->
                    <div class="content-card">
                        <div class="content-card__icon"><i class="fas fa-ambulance"></i></div>
                        <h3 class="content-card__title">SMURD</h3>
                        <p class="content-card__description">Aplică pentru a face parte din serviciul medical de urgență.</p>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSe89cJOLgj8UoSVGGGKEkfUrJ3uA7xp3IfuKQlX0Bn3ZSGbJg/viewform?usp=sharing" class="btn" target="_blank" rel="noopener noreferrer">
                            <i class="fas fa-arrow-right"></i> Aplică SMURD
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer__content">
                <a href="/" class="footer__logo">
                    <img src="https://i.postimg.cc/xT4RZBpg/Pruf-logo.gif" alt="PRUF Logo">
                </a>
                <div class="social-links">
                    <a href="https://www.tiktok.com/@prufrp" target="_blank" rel="noopener noreferrer" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
                    <a href="https://discord.gg/fMycRR7hWt" target="_blank" rel="noopener noreferrer" aria-label="Discord"><i class="fab fa-discord"></i></a>
                    <a href="https://www.youtube.com/@PRUFRP" target="_blank" rel="noopener noreferrer" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    <a href="https://www.instagram.com/pruf.rp?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank" rel="noopener noreferrer" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            <div class="footer__bottom">
                <p>&copy; 2025 Comunitatea PRUF. Toate drepturile rezervate.</p>
            </div>
        </div>
    </footer>

    <script>
        /* Basic Mobile Menu Toggle */
        const navMenu = document.getElementById('nav-menu');
        const navToggle = document.getElementById('nav-toggle');
        const navOverlay = document.getElementById('nav-overlay');

        if (navToggle) {
            navToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
                navOverlay.classList.toggle('active');
                document.body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
            });
        }
        if (navOverlay) {
            navOverlay.addEventListener('click', () => {
                navMenu.classList.remove('active');
                navOverlay.classList.remove('active');
                document.body.style.overflow = '';
            });
        }
        const navLinksMenu = document.querySelectorAll('.nav__list .nav__link'); // Select links inside the menu specifically
        navLinksMenu.forEach(link => {
            link.addEventListener('click', () => {
                if (!link.classList.contains('btn') && navMenu.classList.contains('active')) {
                    navMenu.classList.remove('active');
                    navOverlay.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        });

        /* Header Scroll Effect */
        const header = document.getElementById('header');
        window.addEventListener('scroll', () => {
            if (window.scrollY >= 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });

        /* Active Nav Link Highlighting (Improved for Clean URLs & index.html) */
        const currentPath = window.location.pathname; // e.g., '/', '/index.html', '/aplicatii/', '/aplicatii/index.html'
        const allNavLinks = document.querySelectorAll('.nav__list .nav__link'); // Use the selector that includes menu links

        // Function to normalize path for comparison
        function normalizePath(path) {
            // Remove 'index.html' from the end
            if (path.endsWith('/index.html')) {
                path = path.substring(0, path.length - 'index.html'.length);
            }
            // Ensure root path is '/' and remove trailing slash for others
            if (path !== '/' && path.endsWith('/')) { // <-- corectat aici
                path = path.slice(0, -1);
            }
            // Handle case where path becomes empty after removing index.html (root)
            if (path === '') {
                path = '/';
            }
            return path;
        }

        const normalizedCurrentPath = normalizePath(currentPath);

        // Remove active class from all internal links first
        allNavLinks.forEach(link => {
            const linkHref = link.getAttribute('href');
            // Check if it's an internal link (starts with /) and not an external one or anchor
            const isInternal = linkHref && linkHref.startsWith('/') && !linkHref.startsWith('//');
            if (isInternal) {
                link.classList.remove('active');
            }
        });

        // Find the best match and add active class
        let bestMatchLink = null;
        allNavLinks.forEach(link => {
            const linkHref = link.getAttribute('href');
            const isInternal = linkHref && linkHref.startsWith('/') && !linkHref.startsWith('//');

            if (isInternal) {
                const normalizedLinkHref = normalizePath(linkHref);

                if (normalizedCurrentPath === normalizedLinkHref) {
                    bestMatchLink = link; // Found exact match
                }
            }
        });

        // Apply active class to the best match
        if (bestMatchLink) {
            bestMatchLink.classList.add('active');
        } else {
             // Fallback: If still on root path variations (e.g., '/index.html' normalized to '/'), ensure home is active
             if (normalizedCurrentPath === '/') {
                 const homeLink = document.querySelector('.nav__list .nav__link[href="/"]');
                 if (homeLink) homeLink.classList.add('active');
             }
        }
    </script>
</body>
</html>
